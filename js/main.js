// Generated by CoffeeScript 1.6.1
(function(){$(document).ready(function(){var e,t,n,r,i,s,o,u;t=$(window);n=t.height();e=$(document).height();s=1;(u=function(){window.requestAnimationFrame(u);return s=t.scrollTop()})();t.on("resize",function(){return n=t.height()});$.fn.parallax=function(e){var n,r,i,o;n=$(this);i=n.offset().top;r=Modernizr.prefixed("transform");t.on("resize",function(){return i=n.offset().top});return(o=function(){var t;window.requestAnimationFrame(o);t=Modernizr.csstransforms3d?"translate3d(0, "+Math.floor((i-s)*e)+"px, 0)":"translateY("+(i-s)*e+"px)";return n.css(r,t)})()};$(".background-image").each(function(){return $(this).parallax(-0.3)});o={};(i=function(){return setTimeout(function(){var e;for(e in o)o[e]();return t.one("scroll",i)},300)})();$("input").each(function(){var e,t;e=$(this);t=$.cookie("retiring__"+e.attr("name"));if(t)return e.val(t)});$("input").on("keyup change",function(e){var t;t=$(this);return $.cookie("retiring__"+t.attr("name"),t.val(),{expires:1})});r="https://docs.google.com/forms/d/1cujY_8JrgdzcwsScxv47lF_BY-g9Oz6u0vlrDNjZxGY/formResponse";$("#the_form").submit(function(e){var t;e.preventDefault();$(this).find("input").attr("disabled","disabled").val("Sending...");t={"entry.1728150349":$.cookie("retiring__age")};return $.post("ba-simple-proxy.php?url="+r,t,function(){$.removeCookie("retiring__age");return console.log("Success!")})});$("body").hasClass("chapter-1-rethinking-retirement")&&function(){var e,t,r,i,u,a,f,l;u=$(".site_header");a=$(".story_header_wrapper");e=$(".chapter_title");i=$(".intro");f=e.offset().top;t=$(".expectation_chart");l=t.offset().top;r=$(".data_point",t);o.fade_header=function(){var e,t;e=0;t=0;if(n>s)return a.css({opacity:(1+e)*(t+n-s)/n})};o.shrink_header=function(){var e;e=s/n*100;return u.toggleClass("shown",e>100)};o.animate_pies=function(){return i.toggleClass("active",s>f-n)};return o.show_data_points=function(){return r.toggleClass("active",s>l-400)}}();if($("body").hasClass("chapter-4-working-in-retirement"))return function(){var e,t,n;t=$(".user_age");e=$(".how_long_work");(n=function(){var n;n=t.val();return e.toggleClass("show_over_65",n>=65)})();return t.on("keyup change",n)}()})}).call(this);